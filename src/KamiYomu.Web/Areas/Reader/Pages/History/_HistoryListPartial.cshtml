@using KamiYomu.Web.Extensions
@using KamiYomu.Web.Areas.Reader.Pages.History;
@model IndexModel


@if (Model?.GroupedHistory == null || !Model.GroupedHistory.Any())
{
    return;
}

@foreach (var dateGroup in Model.GroupedHistory)
{
    <div class="date-label small fw-bold text-muted mb-2 mt-4 text-uppercase">
        @dateGroup.Key.ToLongDateString()
    </div>

    @foreach (var entry in dateGroup)
    {
       <vc:history-item view-model="entry" />
    }
}

@if (Model.GroupedHistory.Any())
{
    <div hx-get="/Reader/History?handler=Scroll&offset=@Model.NextOffset"
         hx-trigger="revealed"
         hx-swap="afterend"
         hx-indicator="#load-indicator"
         class="text-center py-3">
        <div id="load-indicator" class="htmx-indicator spinner-border spinner-border-sm text-primary" role="status">
            <span class="visually-hidden">@I18n.Loading...</span>
        </div>
    </div>
}

